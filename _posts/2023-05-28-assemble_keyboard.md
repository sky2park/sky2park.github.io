---
layout:       post
title:        키보드 만들기 마지막 - 펌웨어 개발, 조립하기
categories:   [custom keyboard]
tags:         [제작기]
description:  '마지막 시간입니다. 펌웨어를 개발하고, 부품들을 조립해 키보드를 완성해 봅시다.'
---

오랜만입니다. 키보드를 조립하기 위한 모든 부붐이 모이는데 시간이 좀 걸렸습니다. 빠르게 시작해 보도록 하겠습니다. 이번 포스트는 사진이 많을 것 같습니다. 펌웨어는 샘플을 링크로 올릴 거고, 조립은 딱히 설명할 게 많지 않기 때문입니다.

먼저 펌웨어부터 개발했습니다.. RP2040 MCU에 적용되는 펌웨어는 여러 가지가 있지만, 저는 kmk를 사용했습니다. [kmkfw](http://kmkfw.io/)에 접속해서, Getting Started를 따라 먼저 mcu 테스트를 해 봅니다. 정상적으로 작동이 된다면, main.py 또는 code.py를 만들어 펌웨어를 mcu에 넣어 놓습니다. 정상 작동이 되지 않는다면, MCU 불량일 가능성이 높으니 일단 다른 MCU로 테스트해 봅시다.

> 이 포스트의 끝에 그동안 개발한 모든 파일의 깃헙 링크를 달아 놓았습니다. 해당 경로에서 제가 개발한 펌웨어를 확인할 수 있습니다. kmk 펌웨어는 다른 펌웨어와 마찬가지로 굉장히 직관적이라 별도의 설명 없이도 이해하기가 쉬울 것으로 예상합니다.

다음은 PCB에 MCU를 납땜합니다. 그후 핀셋 등으로 인식 테스트를 해 줍니다. 인터넷에 키보드 테스트 사이트 뭐 이렇게 검색하면 많이 나오니 아무 곳에서나 하면 됩니다. 인식되지 않는 영역이 있다면 펌웨어에 오타가 있나 잘 보시고, 아무리 봐도 펌웨어에 오타가 없다면 기판의 오류이니 눈물을 머금고 다른 기판으로 갈아탑시다. ㅠㅠ

인식 테스트까지 모두 끝났으면, 스테빌을 조립해 줍니다. MCU를 납떔할때 MCU의 위아래를 계획한 대로 잘 납땜하는지 잘 확인해야 합니다. 아니면 납땜 잘 해놓은걸 디솔해야 하거든요..

![1](https://github.com/sky2park/sky2park.github.io/assets/38902150/5dc32707-b21c-4c85-8ce0-e1916ee2b234)

이제 최종 조립 준비가 모두 끝났습니다. 스테빌라이저는 롱폴 버전 줄테빌, 스위치는 SWK F3을 사용했습니다. 이 F3 스위치는 바치리인데, 제가 그동안 바치리를 한번도 사용해 보지 않아서 + 윤활하기 귀찮아서 공윤 그대로 써도 괜찮은 스위치를 찾다가 이걸 사게 되었습니다.

일단 보강판과 PCB부터 결합해 보겠습니다. 보강판은 두 레이어로 나누어 제작했습니다. 2T 상판, 3T하판입니다. 상판과 하판이 살짝 다릅니다. 하판은 MCU 납땜부 돌출 영역이 뚫려 있어, 좀 더 원활한 결합에 도움을 줍니다. 사실 없는채로 한번 주문했다가, 결합이 안되길래 다시 만들어 주문했습니다; 뿐만 아니라, 하판부는 스테빌라이저 철심 영역도 뚫려 있는걸 확인할 수 있습니다. 사실 통으로 5T 제작을 해도 됩니다. 모든 것은 하기 나름이지요.

![2](https://github.com/sky2park/sky2park.github.io/assets/38902150/84af6b9f-4c11-447e-a629-316c6859bac9)

보강판 두개와 PCB를 잘 겹친 다음, 샘플로 각 귀퉁이 부분에만 스위치를 연결하여 결합해 봅니다. 네 귀퉁이가 잘 연결되고, 어디 뒤틀리거나 결합되지 않는 부분 없이 잘 결합이 된다면, 나머지 스위치도 모두 결합해 줍니다. 스위치를 끼울 떄는 뒤쪽 핫스왑 소켓이 떨어지지 않도록, 윗면에서는 스위치를 누를때 밑면에서는 핫스왑 소켓을 받쳐주어야 합니다.

![3](https://github.com/sky2park/sky2park.github.io/assets/38902150/cadbed2d-9c1f-44cd-9f05-19db92c517f0)

모두 깔끔하게 연결이 되었습니다. 제일 힘든 작업이 끝났네요.

이제 나머지 부품을 결합할 차례입니다. 발판부터 차례차례 쌓아 올라오면 됩니다. 한칸한칸 쌓아올리는 재미가 또 적층식 아크릴 구조의 묘미 아닐까 싶네요.

![4](https://github.com/sky2park/sky2park.github.io/assets/38902150/dfbeedd4-256c-4b8a-92d2-e4e6f52a0746)

키캡은 PBTFans Umbra입니다. 검은색 상판에 어울리게 키캡도 검은색으로 골랐는데, 굉장히 만족스럽네요.

![5](https://github.com/sky2park/sky2park.github.io/assets/38902150/a6cf352e-dd64-4826-9c9b-40c574cdf1de)

![v21](https://github.com/sky2park/sky2park.github.io/assets/38902150/8b086de2-965a-4a5d-987a-2addd60e0d1a)

모두 조립한 결과입니다. 깔끔하게 잘 결합된 것 같네요. 마지막으로 바닥에 닿는 부분에 충격방지 범폰도 붙여주면 모든 것이 끝납니다.

이 포스트를 작성하는 현재, 이 키보드를 실사용한지 3-4일 정도 되었습니다. 이전 자작 키보드에서 마음에 들지 않았던 것이 몇 가지가 있었는데(예를 들면 왼손의 원래 위치에서 홈/엔드를 누를수 있게 한다든가 등), 그것들을 보완한 결과가 이 키보드입니다. 쓰면서 불편한 점 없이 아주 잘 사용하고 있습니다. 오쏘리니어도 거의 완벽하게 적응했네요. 처음 오쏘리니어를 쓸 때보다 오타도 훨씬 덜 나고, 그동안 거의 사용하지 않던 오른손 새끼손가락 사용에도 많이 익숙해졌습니다.

여기까지 저의 키보드 제작기였습니다. 처음 작성하기 시작할 때는 그냥 다음에 또 비슷한 거 만들때 도움이 되라고 일기 형식으로 적기 시작했는데, 그래도 블로그에 포스팅하는 거다 보니 문체가 반은 일기 형식, 반은 정보 전달 형식처럼 뒤죽박죽이 되어 버렸네요.

이 포스트 카테고리가 누군가에게는 도움이 되기를 바라며(최소한 저 말고 다른 누군가는!) 제작기를 마칩니다. 감사합니다.

> 키보드 제작 관련 파일 목록 : [https://github.com/sky2park/pherk](https://github.com/sky2park/pherk)  
> ortholinear_v2 디렉토리에 이번 제작기의 모든 파일이 있습니다.