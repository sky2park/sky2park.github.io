---
layout:       post
title:        키보드 만들기 여섯 번째 - 하우징 그리기
categories:   [custom keyboard]
tags:         [제작기]
description:  '아크릴 하우징을 그려 보겠습니다.'
---

하우징을 그려 볼 시간입니다. 재질은 아크릴로, 방식은 적층식으로 그릴 겁니다. 적층식으로 그리게 되면 굳이 3D 도면 툴이 필요하지 않습니다. 평면상에 도면을 그린 후 그대로 높이만 뽑아내면 되거든요. 그래서 2D 캐드 프로그램으로도 그릴 수 있습니다.

보통 오토캐드를 많이 사용하는데, 비싸니까 무료로 그릴 만한 툴을 찾았습니다. [나노캐드 무료 버전](https://nanocad.com/products/nanocad-free/)입니다. 좀 오래된 버전이긴 한데, 키보드 하우징 정도 그리는 데는 아쉬운 대로 쓸만했습니다. 

![nanoCAD Free](https://user-images.githubusercontent.com/38902150/235857761-b3fc44fc-de9f-49d2-860a-a31d78ef1391.png)

>나노캐드 명령어는 따로 작성하지 않았습니다. 주로 사각형, 원, 폴리곤, 선, 필렛 정도의 기능을 많이 사용하는데, 이에 대한 명령어는 구글링 조금만 해 봐도 나오고, 툴 도움말을 봐도 나옵니다.

설치가 다 되었다면 잘 실행되나 확인을 한번 해 주고, Keyboard Layout Editor를 열어 레이아웃을 불러온 다음, Raw Data를 복사해 줍니다. 이 레이아웃을 바탕으로 하우징을 그릴 겁니다.

![Raw Data](https://user-images.githubusercontent.com/38902150/235856257-ceee7ffb-4262-4d75-ab02-66605513b545.png)

복사한 로우데이터를 [Keebio Plate Generator](https://plate.keeb.io/)에 붙여넣어 주었습니다. 여긴 보강판을 KLE 데이터를 기준으로 뽑아주는 곳입니다. 여기서 뽑아낸 보강판 데이터를 기준으로 하우징의 나머지 레이어를 정리할 거에요. 

![Plate](https://user-images.githubusercontent.com/38902150/235867570-b489142f-bad2-4cdb-9348-471089bc534f.png)

아래 옵션에는 컷아웃 입력 칸이 있는데, 스위치 컷아웃은 MX / 1mm, 스테빌라이저 컷아웃을 5mm Plate / 1mm로 해 주고, 어쿠스틱 컷아웃은 None, 키스페이싱은 19.05 / 19.05mm, 커프는 0으로 둡니다. 그리고 Download DXF 버튼을 눌러 다운받은 다음 나노캐드에서 열어 보겠습니다.

![nanoCAD Plate](https://user-images.githubusercontent.com/38902150/235868722-1e140f25-adff-4519-a760-eff834298b35.png)

보이는 여러 개의 필렛 처리된 사각형은 키보드 스위치가 들어갈 공간입니다. 스위치는 14x14의 사이즈로 지정되어 있습니다. 일단, 지금 받은 DXF 파일은 스테빌라이저가 모두 정방향으로 되어 있는데요. PCB를 디자인할 때 스테빌라이저 방향을 뒤집은 게 있다면 같이 뒤집어 줍니다.

동시에 스테빌라이저 유닛을 조금 편하게 다듬어 보겠습니다. 보강판 역시 아크릴로 재단하게 되는데, 지금 뽑힌 스테빌라이저 유닛은 중간에 가느다란 부분이 있어 이게 실제 재단 시에 예쁘게 뽑히지 않는 경우가 많습니다. 그래서 그냥 저 가느다란 부분을 없애버렸습니다.

![스테빌라이저 정리](https://user-images.githubusercontent.com/38902150/235875006-d5fea3c0-7e25-4e04-b964-ac3c21e80acf.png)

이제 KLE를 참고하여 키캡 사이즈의 사각형을 스위치 갯수만큼 만들어 스위치 사각형의 중심과 맞춰 줍니다. 1x1 키캡은 19.05x19.05입니다. 1.25나 1.5, 1.75 등 다른 사이즈의 사각형은 가로를 늘리면 될 것 같네요.

>정사각형이 아닌 사이즈의 사각형을 만들 때는, 예를 들어 1.25u 키캡 사이즈의 사각형을 만들 때는 1.25x1로 사각형을 만든 다음 scale 19.05를 하면 쉽게 만들 수 있습니다.

![키캡 사이즈 기준선](https://user-images.githubusercontent.com/38902150/235878155-87f34128-5097-4d8b-a2fa-18f807a8b812.png)

> 각 도형의 색을 다르게 준건 추후 레이어 별로 나눌 때 알아보기 쉽게 하기 위해서입니다. 또한 도형을 선택할 때 색깔로 선택할 수 있어, 여러 작업을 할 때 편리합니다.

이제 모든 키캡을 감싸는 사각형을 그려줍니다. 이 사각형은 보강판 밑의 하판의 내부 테두리가 될 겁니다. 감싼 다음 필렛을 2mm 줍니다. 아크릴은 대개 레이저 컷팅이라 크게 상관없지만, 만약 CNC 가공 등 다른 재질로 케이스를 제작할 경우 CNC 기계의 특성상 각진 사각형을 파내지 못합니다. 그럴 경우를 대비해서 2mm 필렛을 주게 됩니다.

그 후 외부 테두리를 잡아 줍니다. 이 테두리는 키보드의 가장 바깥 테두리입니다. 저는 위쪽으로 15mm, 아래쪽으로 10mm, 양 옆은 5mm씩 주었습니다.

테두리를 잡아준 다음, MCU가 들어갈 공간도 잡아 줍니다. 이 공간은 USB-C를 연결할 케이블의 공간도 남겨 두어야 되기 때문에, 외부 테두리까지 뻗어나가야 합니다.

![테두리](https://user-images.githubusercontent.com/38902150/235882322-1713c52e-5f3c-49b2-8bf9-ab69e5a50067.png)

이제 키보드 상판 내부 테두리를 만들어 보겠습니다. 서로 붙은 키캡들을 감싸는 폴리곤을 그린 다음, 오프셋 0.5mm를 주고 필렛 2mm를 주면 됩니다. 떨어진 키캡이 있다면 폴리곤도 떨어진 키캡들의 갯수만큼 나올 겁니다. TKL로 예를 들면 ESC 키만 감싸는 폴리곤 1개, 펑션키 4개씩 감싸는 폴리곤 3개, 네비게이션열 폴리곤 1개, 방향키 폴리곤 1개, 알파+모디열 폴리곤 1개 뭐 이런 식으로 나오겠네요.

이때 필렛은 모든 각에 주어도 되고, 내각만 해도 됩니다. 저는 외각은 그냥 하지 않고, 내각에만 필렛을 주었습니다.

![상판 테두리](https://user-images.githubusercontent.com/38902150/235884616-d205458b-592a-4269-85ee-cccdecbff2bc.png)

깜빡한게 하나 있네요. 보강판을 5mm 두께로 할 건데, 2mm와 3mm로 나눌 겁니다. 2mm가 위쪽으로 가고, 3mm가 아래쪽으로 갑니다. 아까 간략화한 스테빌라이저 도형은 3mm짜리 보강판 하판 기준이고, 2mm짜리 보강판 상판을 또 만들겁니다. 안 만들고 3mm짜리를 그냥 2mm에 써도 상관은 없는데, 스위치를 더 단단하게 잡아주기 위해 그냥 만들려고 합니다. 2mm짜리 보강판은 아까 Keebio Plate Generator에서 스테빌라이저 컷아웃에 3mm Plate를 선택하고 저장하면 됩니다. 2mm용인데 3mm Plate를 선택해야 합니다. 헷갈리지 않도록 해야겠네요. 스테빌라이저가 스크류-인 방식이라면 3mm Plate for Screw-ins를 선택하면 됩니다. 받은 다음 스테빌라이저 부분만 복사해서 지금 만들고 있는 파일로 붙여넣어 준 다음 현재 스테빌라이저에 잘 맞추어 겹쳐 줍니다. 겹칠 때의 기준은 스위치가 되어야 합니다.

![double plate](https://user-images.githubusercontent.com/38902150/235890005-5c682a1b-461c-4bc7-ae49-e6655a611d8b.png)

마지막으로 스페이서가 들어갈 공간을 만들면 됩니다. M3 스페이서 8개를 사용해서 레이어를 연결할 건데요. M3 스페이서를 먼저 사고 사이즈를 측정한 다음 그에 맞춰 구멍을 파 주는게 깔끔하게 맞아 떨어지더라구요. 측정한 사이즈와 똑같은 사이즈로 구멍을 파면 맞물려서 들어가지 않는 상황이 생길수 있으니, 0.2mm 정도 오프셋을 주면 좋을 것 같네요.

![complete](https://user-images.githubusercontent.com/38902150/235895409-76ec302d-7308-4d05-85b0-a87ba158bc7f.png)

상하단에 M3용 나사홀을 추가하였고, 하판에 M4용 나사홀을 3개 추가하였습니다. 이것은 자경을 위한 발판을 연결하기 위한 부분입니다. 자경용 발판은 3mm짜리 아크릴 판을 3개 연결하여 9mm 정도의 높이로 만들 겁니다. 아크탄젠트로 5도 정도의 경사가 나오도록 계산을 해 보니 9mm가 좋을 것 같더라구요. 

![자경용 발판](https://user-images.githubusercontent.com/38902150/235926332-2c01a8f9-0cd0-4ba7-af79-af373e1814dd.png)

여기까지 하면 다 완성된 겁니다. 이제 레이어 갯수만큼 캐드 도면을 복사한 다음, 각 레이어에 맞게 정리해 주면 됩니다. 저는 상판 2 레이어, 보강판 2 레이어, 하판 2 레이어, 발판 3 레이어, 총 9개의 레이어가 나오는데, 이에 맞춰 도면을 정리한 결과는 아래와 같습니다.

![Divide by layer](https://user-images.githubusercontent.com/38902150/235929984-5530ebca-2732-431d-8b1c-67798b1c58b9.png)

Autodesk Fusion 360에서 이 dxf 파일을 그대로 불러와서 미리 조립해볼 수 있습니다. Autodesk FUsion 360은 커뮤니티용 무료 버전이 있어서 꽤 쓸만합니다. 3D 도면을 그릴 때에도 이 툴을 많이 활용하기도 합니다. 아무튼, 나노캐드에서 만든 이 파일을 Autodesk Fusion 360에서 불러와서 조립하면 다음과 같이 나옵니다.

![Fusion360](https://user-images.githubusercontent.com/38902150/235934319-31555572-7120-4659-a6ab-806ba5c75ce3.png)

주로 접합부를 보면서 스페이서가 들어갈 공간이 이상하진 않은지 등을 체크하면 좋습니다.
이상이 없다면 아크릴 업체에서 주문을 하면 됩니다. 아크릴 적층식 하우징을 제작해주는 업체는 키보드 관련 커뮤니티에서 검색해보면 금방 나오니 따로 적지 않겠습니다. 크게 두 개의 업체에서 많이들 제작하는 것 같더라구요.

주문시 주의할 점이 있습니다. 먼저 스페이서 규격 관련 이야기입니다. 보통 스페이서를 구매하게 되면 구매 페이지에 규격이 나와 있습니다. 그런데 이런 부품 특성상 규격과는 약간씩 오차가 생기게 마련인데, 이를 미리 알기가 쉽지 않기 때문에 주의해야 합니다. 규격이 만약 5mm라고 한다면, 5mm, 5.2mm, 5.3mm 등 여러 사이즈를 가진 스페이서 홀이 뚫린 아크릴을 한장 샘플로 주문해서 미리 체크해 보는 것도 나쁘지 않습니다.

두 번째는 스페이서 길이 이야기입니다. 예를 들어 상판 8mm, 보강판 5mm, 하판 8mm의 두께로 만들었다면 총 두께는 21mm입니다. 스페이서를 21mm 짜리로 주문하면 딱 좋겠지만, 이론적으로 딱 맞아 떨어지는 길이를 주문하면 틀림없이 스페이서 쪽이 '남습니다'. 그래서 기본적으로는 스페이서의 이론상 두께보다 1~2mm 작은 것을 구매하기를 추천합니다. 

그런데, 이렇게 함에도 불구하고, 이 적층식 구조 때문에 딱 21mm가 떨어지지 않습니다. 아무래도 재단하면서 약간의 오차가 생기는 경우로 추측되는데요. 저의 경우에는 총 9레이어 30mm 두께로 재단을 했지만, 도착한 아크릴 하우징을 쌓아 보니 두께가 27mm밖에 되지 않았습니다. 총 3mm의 오차, 레이어당 약 0.3~0.4mm까지 오차가 날 수 있던 거였죠. 그래서 스페이서와 나사를 주문할 때에는 이런 것도 잘 예상해서 주문해야 합니다. 깔끔한 방법은 스페이서가 연결할 레이어의 양 끝을 제외한 나머지 길이 + 2~3mm 입니다.
예를 들어, 상판 3mm, 5mm, 보강판 5mm, 하판 5mm, 3mm인 경우, 상/하판 3mm짜리를 제외한 15mm + 3mm 하여 18mm 정도로 하면 무난하게 연결이 됩니다. 만약 사이즈가 없다면 19mm 정도까지도 괜찮았던 것 같습니다.

하우징을 주문하고 나면, 하우징을 결합할 스페이서와 나사(납작머리나사를 추천합니다), 책상과 맞닿는 곳에 붙일 충격 흡수용 범폰(3M 충격방지범폰을 추천합니다), 그리고 스위치, 키캡 등을 구매하면 됩니다.

모든 준비가 되었으니, 다음 포스트에서는 납땜 및 조립을 해보겠습니다. 주문한 모든 부품이 올 때까지 기다려야 하니, 좀 나중에 포스팅을 할 수도 있겠네요.